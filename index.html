<!DOCTYPE html>
<html>
<head> 
<title>...</title>
<style>

#can{border: 2px solid blue;}



</style>
<link  rel="icon" href="https://lh3.googleusercontent.com/proxy/N9V2L5TyOd7hSSXLsL4v78XB8g6qf-qn71MWoZT5_jH1marpskzweUAp4T29kusvkTCG7KJLkNZ7hTIqWkVj_A6zoJ_0yo6E7C1YBShrdQ76pnmBm30" type="image/png" />

<meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body align="center" onload="init()">

<h1 id="w"></h1>

<canvas id="can" width="400" height="400"></canvas>

<script>

function init(){
    var ctx = document.getElementById('can').getContext('2d');
    var sc = 0;

    let snake = [  
    {x: 200, y: 200},  
    {x: 190, y: 200},  
    {x: 180, y: 200},   
    {x: 170, y: 200},  
    {x: 160, y: 200},
    ];

    let dx = 10;
    let dy = 0;

draw();

function draw(){setTimeout(() => {

    if (has_game_ended()) return;
    
    ctx.clearRect(0, 0, 800, 800);
    drawSnake();
    ms();
    draw();

// document.getElementById('w').innerHTML = "score " + sc;
// document.getElementById('msc').innerHTML = msc;

// if(sc > msc){msc=sc}
}, 1000/8); 

}
crecer();

function drawSnake(){snake.forEach(dsp);}

function dsp(sp){

    ctx.fillStyle = 'lightblue';  
    ctx.strokestyle = 'darkblue';
    ctx.fillRect(sp.x, sp.y, 10, 10);  
    ctx.strokeRect(sp.x, sp.y, 10, 10);

}
      
function ms(){

      var head = {x: snake[0].x + dx, y: snake[0].y + dy};
      snake.unshift(head);
      snake.pop();
    }


    function has_game_ended()
{  
  for (let i = 4; i < snake.length; i++)
  {    
    const semordio = snake[i].x === snake[0].x && snake[i].y === snake[0].y
    if (semordio) 
      return true
  }
  var hitLeftWall = snake[0].x < 0;  
  var hitRightWall = snake[0].x > 400 - 10;
  var hitToptWall = snake[0].y < 0;
  var hitBottomWall = snake[0].y > 400 - 10;
 
  return hitLeftWall ||  hitRightWall || hitToptWall || hitBottomWall
}


function crecer(){

    var cola = 4;
    setInterval(() => {

       snake.push({x: snake[cola].x, y: snake[cola].y}); 
        cola++;
        
    }, 5000);

}



    document.addEventListener('keydown', function(event){

if(event.keyCode === 38 && dy != 10){
    dx = 0;
    dy = -10;
}

if(event.keyCode === 40 && dy != -10){
    dx = 0;
    dy = 10;
}

if(event.keyCode === 37 && dx != 10){
    dx = -10;
    dy = 0;
}

if(event.keyCode === 39 && dx != -10){
    dx = 10;
    dy = 0;
}

if(event.keyCode === 80){
    location.reload();
}

    });
    
}


</script>

</body>

</html>